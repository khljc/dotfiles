#!/usr/bin/env bash

### Full credit for this script to https://github.com/TheGassyNinja

export DISPLAY=:0

# Define base directory
base_screenshot_dir="${HOME}/pictures/screenshots"

# Create a subfolder with the current date (YYYY-MM-DD)
date_folder=$(date +"%Y-%m-%d")
screenshot_dir="${base_screenshot_dir}/${date_folder}"

# Ensure the directory exists
mkdir -p "${screenshot_dir}"

# Generate a unique filename with timestamp
current=$(date +"%H-%M-%S").png

# Take the screenshot
if [[ -z "${1}" ]]; then
   import -window root "${screenshot_dir}/${current}" # Full-screen screenshot
else
   import "${screenshot_dir}/${current}" # Custom area screenshot
fi

# Notify user
notify-send "Screenshot saved to ${screenshot_dir}/${current}"
